Description: Update upstream version 0.8 with latest patches from upstream git
 As those fixes will not be provided as a tag, it is provided here as a patch.
 7cee3f6 -> Merge branch 'master' into gnome-shell-3.8 (updates README.md,
   es and ru po files and LINGUAS file)
 eaa065d -> Corrected some misspellings in po/pt_BR.po file
 a41f7ea -> Backport fixes from 0.9 release
 863e895 -> Disconnect settings 'changed' signal when destroying objects
  This solves issue with having lots of messages logged in syslog when coming
  from lock screen of GNOME.
Origin: upstream, https://github.com/codito/gnome-shell-pomodoro/compare/140290b...863e895
From: upstream
Last-Update: 2014-01-30
--- a/README.md
+++ b/README.md
@@ -68,7 +68,64 @@
 - Use toggle switch (or *Ctrl+Alt+P*) to toggle timer on/off
 - You can configure behavior of the extension in *Options* menu
 
-For a list of configurable options, please refer [wiki](https://github.com/codito/gnome-shell-pomodoro/wiki/Configuration)
+...and there are a couple of options:
+- _Reset Counts and Timers_: Resets your pomodoro session count.
+- _Away From Desk_: Automatically start next pomodoro session after pause. Useful if you're sitting away from computer.
+- _Control Presence Status_: During a pomodoro session, mark your IM presence status to Busy.
+- _Screen Notifications_: After completion of a pomodoro session, show a dialog box (system modal) that will force you to take a break :)
+- _Sound Notifications_: Notify completion of pomodoro by playing a sound.
+
+# Settings
+We recommend you use the Options menu to configure Pomodoro extension. If you still want to tinker with settings, you can use dconf-editor or gsettings via commandline. Settings for Pomodoro are in */org/gnome/shell/extensions/pomodoro* tree.
+
+**Change notification sound**
+
+You can customize notification sound with:
+
+        SCHEMADIR=~/.local/share/gnome-shell/extensions/pomodoro@arun.codito.in/schemas/
+        gsettings --schemadir $SCHEMADIR set org.gnome.shell.extensions.pomodoro sound-uri "/usr/share/sounds/freedesktop/stereo/complete.oga"
+
+…or if installed system-wide
+
+        gsettings set org.gnome.shell.extensions.pomodoro sound-uri "/usr/share/sounds/freedesktop/stereo/complete.oga"
+
+For the sound file used in this example you may need to install package *sound-theme-freedesktop*.
+
+
+**Change keyboard shortcut**
+
+Hotkey to toggle the timer *Ctrl+Alt+P* may be used in one of your apps (Emacs, Sublime Text, etc.), in which case it will toggle the timer. You can change the shortcut by:
+
+        SCHEMADIR=~/.local/share/gnome-shell/extensions/pomodoro@arun.codito.in/schemas/
+        gsettings --schemadir $SCHEMADIR set org.gnome.shell.extensions.pomodoro toggle-pomodoro-timer "['<Super>p']"
+
+…or if installed system-wide
+
+        gsettings set org.gnome.shell.extensions.pomodoro toggle-pomodoro-timer "['<Super>p']"
+
+
+**Reset settings to default**
+
+If you ever need to reset settings, you can use
+
+        SCHEMADIR=~/.local/share/gnome-shell/extensions/pomodoro@arun.codito.in/schemas/
+        gsettings --schemadir $SCHEMADIR reset-recursively org.gnome.shell.extensions.pomodoro
+
+…or if installed system-wide
+
+        gsettings reset-recursively org.gnome.shell.extensions.pomodoro
+
+For more options see *gsettings --help*
+
+
+# Debugging
+
+If you experience the extension causing problems, please run *gnome-shell* with error log redirected to a file:
+
+        DISPLAY=:0 gnome-shell --replace > gnome-shell.log 2>&1
+
+You can also recover from most *gnome-shell* crashes using the same command.
+
 
 # License
 GPL3. See [COPYING](https://raw.github.com/codito/gnome-shell-pomodoro/master/COPYING) for details.
--- a/po/LINGUAS
+++ b/po/LINGUAS
@@ -5,4 +5,5 @@
 fr
 pl
 pt_BR
+ru
 zh_CN
--- a/po/ca.po
+++ b/po/ca.po
@@ -129,17 +129,17 @@
 
 #: ../src/timer.js:514
 #, c-format
-msgid "Take a break, you have %d second\n"
-msgid_plural "Take a break, you have %d seconds\n"
-msgstr[0] "Prengui's un descans, té %d segon\n"
-msgstr[1] "Prengui's un descans, té %d segons\n"
+msgid "Take a break, you have %d second"
+msgid_plural "Take a break, you have %d seconds"
+msgstr[0] "Prengui's un descans, té %d segon"
+msgstr[1] "Prengui's un descans, té %d segons"
 
 #: ../src/timer.js:516
 #, c-format
-msgid "Take a break, you have %d minute\n"
-msgid_plural "Take a break, you have %d minutes\n"
-msgstr[0] "Prengui's un descans, té %d minut\n"
-msgstr[1] "Prengui's un descans, té %d minuts\n"
+msgid "Take a break, you have %d minute"
+msgid_plural "Take a break, you have %d minutes"
+msgstr[0] "Prengui's un descans, té %d minut"
+msgstr[1] "Prengui's un descans, té %d minuts"
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:1
 msgid "Timer toggle key"
--- a/po/cs.po
+++ b/po/cs.po
@@ -51,7 +51,7 @@
 
 #. Notification dialog toggle
 #: ../src/extension.js:141
-msgid "Fullscreen Notifications"
+msgid "Screen Notifications"
 msgstr "Ukaž dialogové zprávy"
 
 #. Notify with a sound toggle
@@ -96,8 +96,8 @@
 
 #: ../src/timer.js:440
 #, fuzzy
-msgid "It's time to take a break!"
-msgstr "Čas udělat si přestávku!"
+msgid "It's time to take a break"
+msgstr "Čas udělat si přestávku"
 
 #: ../src/timer.js:462
 msgid "Take a break!"
@@ -114,17 +114,17 @@
 
 #: ../src/timer.js:656
 #, fuzzy, c-format
-msgid "You have %d second left.\n"
-msgid_plural "You have %d seconds left.\n"
-msgstr[0] "Dej si pauzu, máš %d vteřinu.\n"
-msgstr[1] "Dej si pauzu, máš %d vteřin.\n"
+msgid "You have %d second left."
+msgid_plural "You have %d seconds left."
+msgstr[0] "Dej si pauzu, máš %d vteřinu."
+msgstr[1] "Dej si pauzu, máš %d vteřin."
 
 #: ../src/timer.js:658
 #, fuzzy, c-format
-msgid "You have %d minute left.\n"
-msgid_plural "You have %d minutes left.\n"
-msgstr[0] "Dej si pauzu, máš %d minutu.\n"
-msgstr[1] "Dej si pauzu, máš %d minut.\n"
+msgid "You have %d minute left."
+msgid_plural "You have %d minutes left."
+msgstr[0] "Dej si pauzu, máš %d minutu."
+msgstr[1] "Dej si pauzu, máš %d minut."
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:1
 msgid "Pomodoro duration"
--- a/po/es.po
+++ b/po/es.po
@@ -32,7 +32,7 @@
 #. Options SubMenu
 #: ../src/extension.js:99
 msgid "Options"
-msgstr "Opciones"
+msgstr "Opciónes"
 
 #. Reset counters
 #: ../src/extension.js:122
@@ -52,8 +52,8 @@
 #. Notification dialog toggle
 #: ../src/extension.js:141
 #, fuzzy
-msgid "Fullscreen Notifications"
-msgstr "Notificación de sonido"
+msgid "Screen Notifications"
+msgstr "Notificaciones a pantalla completa"
 
 #. Notify with a sound toggle
 #: ../src/extension.js:148
@@ -88,20 +88,20 @@
 
 #: ../src/timer.js:422
 msgid "Pause finished."
-msgstr ""
+msgstr "El descanso ha finalizado"
 
 #: ../src/timer.js:423
 #, fuzzy
 msgid "A new pomodoro is starting."
-msgstr "La pausa ha finalizado, un nuevo pomodoro está comenzando!"
+msgstr "Un nuevo pomodoro está comenzando!"
 
 #: ../src/timer.js:440
-msgid "It's time to take a break!"
-msgstr ""
+msgid "It's time to take a break"
+msgstr "¡Es la hora de tomar un descanso!"
 
 #: ../src/timer.js:462
 msgid "Take a break!"
-msgstr ""
+msgstr "¡Tómese un descanso!"
 
 #: ../src/timer.js:465
 msgid "Start a new pomodoro"
@@ -109,21 +109,21 @@
 
 #: ../src/timer.js:543
 msgid "Hey, you're missing out on a break."
-msgstr ""
+msgstr "¡Se te está pasando el descanso!"
 
 #: ../src/timer.js:656
 #, fuzzy, c-format
-msgid "You have %d second left.\n"
-msgid_plural "You have %d seconds left.\n"
-msgstr[0] "Tómese un descanso, tiene %d segundo\n"
-msgstr[1] "Tómese un descanso, tiene %d segundos\n"
+msgid "You have %d second left."
+msgid_plural "You have %d seconds left."
+msgstr[0] "Tiene %d segundo"
+msgstr[1] "Tiene %d segundos"
 
 #: ../src/timer.js:658
 #, fuzzy, c-format
-msgid "You have %d minute left.\n"
-msgid_plural "You have %d minutes left.\n"
-msgstr[0] "Tómese un descanso, tiene %d minuto\n"
-msgstr[1] "Tómese un descanso, tiene %d minutos\n"
+msgid "You have %d minute left."
+msgid_plural "You have %d minutes left."
+msgstr[0] "Tiene %d minuto"
+msgstr[1] "Tiene %d minutos"
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:1
 msgid "Pomodoro duration"
--- a/po/fa.po
+++ b/po/fa.po
@@ -51,7 +51,7 @@
 
 #. Notification dialog toggle
 #: ../src/extension.js:141
-msgid "Fullscreen Notifications"
+msgid "Screen Notifications"
 msgstr "نمایش محاوره‌ی پیام‌ها"
 
 #. Notify with a sound toggle
@@ -93,8 +93,8 @@
 msgstr "یک پومودورو دیگه شروع شد."
 
 #: ../src/timer.js:440
-msgid "It's time to take a break!"
-msgstr "حالا وقت استراحت است!"
+msgid "It's time to take a break"
+msgstr "حالا وقت استراحت است"
 
 #: ../src/timer.js:462
 msgid "Take a break!"
@@ -110,15 +110,15 @@
 
 #: ../src/timer.js:656
 #, c-format
-msgid "You have %d second left.\n"
-msgid_plural "You have %d seconds left.\n"
-msgstr[0] "شما %Id ثانیه زمان دارید\n"
+msgid "You have %d second left."
+msgid_plural "You have %d seconds left."
+msgstr[0] "شما %Id ثانیه زمان دارید"
 
 #: ../src/timer.js:658
 #, c-format
-msgid "You have %d minute left.\n"
-msgid_plural "You have %d minutes left.\n"
-msgstr[0] "شما %Id دقیقه زمان دارید\n"
+msgid "You have %d minute left."
+msgid_plural "You have %d minutes left."
+msgstr[0] "شما %Id دقیقه زمان دارید"
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:1
 msgid "Pomodoro duration"
--- a/po/fr.po
+++ b/po/fr.po
@@ -55,7 +55,7 @@
 #. Notification dialog toggle
 #: ../src/extension.js:141
 #, fuzzy
-msgid "Fullscreen Notifications"
+msgid "Screen Notifications"
 msgstr "Afficher la boîte de dialogue"
 
 #. Notify with a sound toggle
@@ -104,7 +104,7 @@
 
 #: ../src/timer.js:440
 #, fuzzy
-msgid "It's time to take a break!"
+msgid "It's time to take a break"
 msgstr ""
 
 #: ../src/timer.js:462
@@ -123,17 +123,17 @@
 
 #: ../src/timer.js:656
 #, fuzzy, c-format
-msgid "You have %d second left.\n"
-msgid_plural "You have %d seconds left.\n"
-msgstr[0] "Prenez une pause, vous avez %d seconde\n"
-msgstr[1] "Prenez une pause, vous avez %d secondes\n"
+msgid "You have %d second left."
+msgid_plural "You have %d seconds left."
+msgstr[0] "Prenez une pause, vous avez %d seconde"
+msgstr[1] "Prenez une pause, vous avez %d secondes"
 
 #: ../src/timer.js:658
 #, fuzzy, c-format
-msgid "You have %d minute left.\n"
-msgid_plural "You have %d minutes left.\n"
-msgstr[0] "Prenez une pause, vous avez %d minute\n"
-msgstr[1] "Prenez une pause, vous avez %d minutes\n"
+msgid "You have %d minute left."
+msgid_plural "You have %d minutes left."
+msgstr[0] "Prenez une pause, vous avez %d minute"
+msgstr[1] "Prenez une pause, vous avez %d minutes"
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:1
 msgid "Pomodoro duration"
--- a/po/gnome-shell-pomodoro.pot
+++ b/po/gnome-shell-pomodoro.pot
@@ -52,7 +52,7 @@
 
 #. Notification dialog toggle
 #: ../src/extension.js:141
-msgid "Fullscreen Notifications"
+msgid "Screen Notifications"
 msgstr ""
 
 #. Notify with a sound toggle
@@ -95,7 +95,7 @@
 msgstr ""
 
 #: ../src/timer.js:440
-msgid "It's time to take a break!"
+msgid "It's time to take a break"
 msgstr ""
 
 #: ../src/timer.js:462
@@ -112,15 +112,15 @@
 
 #: ../src/timer.js:656
 #, c-format
-msgid "You have %d second left.\n"
-msgid_plural "You have %d seconds left.\n"
+msgid "You have %d second left."
+msgid_plural "You have %d seconds left."
 msgstr[0] ""
 msgstr[1] ""
 
 #: ../src/timer.js:658
 #, c-format
-msgid "You have %d minute left.\n"
-msgid_plural "You have %d minutes left.\n"
+msgid "You have %d minute left."
+msgid_plural "You have %d minutes left."
 msgstr[0] ""
 msgstr[1] ""
 
--- a/po/pl.po
+++ b/po/pl.po
@@ -52,8 +52,8 @@
 
 #. Notification dialog toggle
 #: ../src/extension.js:141
-msgid "Fullscreen Notifications"
-msgstr "Powiadomienia pełnoekranowe"
+msgid "Screen Notifications"
+msgstr "Powiadomienia ekranowe"
 
 #. Notify with a sound toggle
 #: ../src/extension.js:148
@@ -96,7 +96,7 @@
 msgstr "Czas wrócić do pracy."
 
 #: ../src/timer.js:440
-msgid "It's time to take a break!"
+msgid "It's time to take a break"
 msgstr "To właściwy czas na zrobienie przerwy"
 
 #: ../src/timer.js:462
@@ -113,19 +113,19 @@
 
 #: ../src/timer.js:656
 #, c-format
-msgid "You have %d second left.\n"
-msgid_plural "You have %d seconds left.\n"
-msgstr[0] "Została %d sekunda.\n"
-msgstr[1] "Zostały %d sekundy.\n"
-msgstr[2] "Zostało %d sekund.\n"
+msgid "You have %d second left."
+msgid_plural "You have %d seconds left."
+msgstr[0] "Została %d sekunda."
+msgstr[1] "Zostały %d sekundy."
+msgstr[2] "Zostało %d sekund."
 
 #: ../src/timer.js:658
 #, c-format
-msgid "You have %d minute left.\n"
-msgid_plural "You have %d minutes left.\n"
-msgstr[0] "Została %d minuta.\n"
-msgstr[1] "Zostały %d minuty.\n"
-msgstr[2] "Zostało %d minut.\n"
+msgid "You have %d minute left."
+msgid_plural "You have %d minutes left."
+msgstr[0] "Została %d minuta."
+msgstr[1] "Zostały %d minuty."
+msgstr[2] "Zostało %d minut."
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:1
 msgid "Pomodoro duration"
--- a/po/pt_BR.po
+++ b/po/pt_BR.po
@@ -51,7 +51,7 @@
 
 #. Notification dialog toggle
 #: ../src/extension.js:141
-msgid "Fullscreen Notifications"
+msgid "Screen Notifications"
 msgstr "Notificações em Tela Cheia"
 
 #. Notify with a sound toggle
@@ -94,12 +94,12 @@
 msgstr "Um novo pomodoro esta começando."
 
 #: ../src/timer.js:440
-msgid "It's time to take a break!"
-msgstr "É hora de descançar!"
+msgid "It's time to take a break"
+msgstr "É hora de descansar"
 
 #: ../src/timer.js:462
 msgid "Take a break!"
-msgstr "Descance!"
+msgstr "Descanse!"
 
 #: ../src/timer.js:465
 msgid "Start a new pomodoro"
@@ -111,17 +111,17 @@
 
 #: ../src/timer.js:656
 #, c-format
-msgid "You have %d second left.\n"
-msgid_plural "You have %d seconds left.\n"
-msgstr[0] "Você tem %d segundo restante.\n"
-msgstr[1] "Você tem %d segundos restantes.\n"
+msgid "You have %d second left."
+msgid_plural "You have %d seconds left."
+msgstr[0] "Você tem %d segundo restante."
+msgstr[1] "Você tem %d segundos restantes."
 
 #: ../src/timer.js:658
 #, c-format
-msgid "You have %d minute left.\n"
-msgid_plural "You have %d minutes left.\n"
-msgstr[0] "Você tem %d minuto restante.\n"
-msgstr[1] "Você tem %d minutos restantes.\n"
+msgid "You have %d minute left."
+msgid_plural "You have %d minutes left."
+msgstr[0] "Você tem %d minuto restante."
+msgstr[1] "Você tem %d minutos restantes."
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:1
 msgid "Pomodoro duration"
@@ -149,7 +149,7 @@
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:7
 msgid "Show dialog notifications during breaks"
-msgstr "Monstrar notificações durante os intervalos"
+msgstr "Mostrar notificações durante os intervalos"
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:8
 msgid "Whether to show a notification dialog when pause starts."
@@ -189,7 +189,7 @@
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:17
 msgid "Restore timer state"
-msgstr "Rescuperar o estado do tempo"
+msgstr "Recuperar o estado do tempo"
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:18
 msgid "Whether to restore state on startup."
--- /dev/null
+++ b/po/ru.po
@@ -0,0 +1,241 @@
+# Russian translation for gnome-shell-pomodoro
+# Copyright (c) 2012 gnome-shell-pomodoro contributors
+# This file is distributed under the same license as the gnome-shell-pomodoro package.
+# liberumed <liberumed@gmail.com>, 2013.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: gnome-shell-pomodoro\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2012-03-18 16:22+0100\n"
+"PO-Revision-Date: 2013-06-03 12:11+0200\n"
+"Last-Translator: liberumed <liberumed@gmail.com>\n"
+"Language-Team: ru <>\n"
+"Language: ru\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bits\n"
+"Plural-Forms: nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);\n"
+
+#: ../src/extension.js:61
+#, c-format
+msgid "%d minute"
+msgid_plural "%d minutes"
+msgstr[0] "%d минута"
+msgstr[1] "%d минуты"
+msgstr[2] "%d минут"
+
+#. Toggle timer state button
+#: ../src/extension.js:96 ../src/notification.js:54
+msgid "Pomodoro Timer"
+msgstr "Помодоро Таймер"
+
+#. Options SubMenu
+#: ../src/extension.js:109
+msgid "Options"
+msgstr "Параметры"
+
+#. Reset counters
+#: ../src/extension.js:132
+msgid "Reset Counts and Timer"
+msgstr "Сбросить Счётчик и Таймер"
+
+#: ../src/extension.js:133
+msgid "Click to reset session counts to zero"
+msgstr "Нажмите, чтобы сбросить счётчик на ноль"
+
+#. Away from desk toggle
+#: ../src/extension.js:138
+msgid "Away From Desk"
+msgstr "Удаленный Режим"
+
+#: ../src/extension.js:139
+msgid "Set optimal settings for doing paperwork"
+msgstr "Настройки для работы с бумагами"
+
+#. Presence status toggle
+#: ../src/extension.js:146
+msgid "Control Presence Status"
+msgstr "Управление Статусом Присутствия"
+
+#: ../src/extension.js:147
+msgid "Change online status and disable notifications including chat messages"
+msgstr ""
+"Изменить онлайн статус и отключить уведомления, включая сообщения чата"
+
+#. Notification dialog toggle
+#: ../src/extension.js:154
+msgid "Show Dialog Messages"
+msgstr "Показывать Уведомления"
+
+#: ../src/extension.js:155
+msgid "Show a dialog message at the end of pomodoro session"
+msgstr "Показывать уведомления в конце помодоро сессии"
+
+#. Notify with a sound toggle
+#: ../src/extension.js:162
+msgid "Sound Notifications"
+msgstr "Звуковые Уведомления"
+
+#: ../src/extension.js:163
+msgid "Play a sound at start of pomodoro session"
+msgstr "Проигрывать звук в начале помодоро сессии"
+
+#. Pomodoro duration
+#: ../src/extension.js:170
+msgid "Pomodoro Duration"
+msgstr "Длительность Помодоро"
+
+#. Short pause duration
+#: ../src/extension.js:183
+msgid "Short Break Duration"
+msgstr "Длительность Короткого Перерыва"
+
+#. Long pause duration
+#: ../src/extension.js:204
+msgid "Long Break Duration"
+msgstr "Длительность Большого Перерыва"
+
+#: ../src/extension.js:322
+msgid "No Completed Sessions"
+msgstr "Нет Завершенных Сессий"
+
+#: ../src/extension.js:324
+#, c-format
+msgid "%d Completed Session"
+msgid_plural "%d Completed Sessions"
+msgstr[0] "%d Завершенная Сессия"
+msgstr[1] "%d Завершенные Сессии"
+msgstr[2] "%d Завершенных Сессий"
+
+#: ../src/timer.js:411
+msgid "Pause finished, a new pomodoro is starting!"
+msgstr "Пауза завершена, начало нового помодоро!"
+
+#: ../src/timer.js:433
+msgid "Pomodoro Finished!"
+msgstr "Помодоро Завершен!"
+
+#: ../src/timer.js:435
+msgid "Hide"
+msgstr "Спрятать"
+
+#: ../src/timer.js:441 ../src/timer.js:451
+msgid "Start a new pomodoro"
+msgstr "Начать новый помодоро"
+
+#: ../src/timer.js:446
+msgid "Show dialog"
+msgstr "Показать сообщение"
+
+#: ../src/timer.js:514
+#, c-format
+msgid "Take a break, you have %d second."
+msgid_plural "Take a break, you have %d seconds."
+msgstr[0] "Сделайте перерыв, у Вас %d секунда"
+msgstr[1] "Сделайте перерыв, у Вас %d секунды"
+msgstr[2] "Сделайте перерыв, у Вас %d секунд"
+
+#: ../src/timer.js:516
+#, c-format
+msgid "Take a break, you have %d minute."
+msgid_plural "Take a break, you have %d minutes."
+msgstr[0] "Сделайте перерыв, у Вас %d минута"
+msgstr[1] "Сделайте перерыв, у Вас %d минуты"
+msgstr[2] "Сделайте перерыв, у Вас %d минут"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:1
+msgid "Timer toggle key"
+msgstr "Кнопка запуска таймера"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:2
+msgid "Key to toggle the timer."
+msgstr "Кнопка для запуска и остановки таймера"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:3
+msgid "Pomodoro duration"
+msgstr "Длительность Помодоро"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:4
+msgid "Time in seconds you are supposed to be working."
+msgstr "Время в секундах отведенное для работы"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:5
+msgid "Short pause duration"
+msgstr "Длительность короткой паузы"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:6
+msgid "Time in seconds you are supposed to have a short break."
+msgstr "Время в секундах отведенное для короткого перерыва"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:7
+msgid "Long pause duration"
+msgstr "Длительонсть длинной паузы"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:8
+msgid "Time in seconds you are supposed to have a longer break."
+msgstr "Время в секундах отведенное для большого перерыва"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:9
+msgid "Show dialog notifications during breaks"
+msgstr "Показывать сообщения во время перерыва"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:10
+msgid "Whether to show a notification dialog when pause starts."
+msgstr "Следует ли показывать диалоговые сообщения во время паузы"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:11
+msgid "Disable flexible breaks"
+msgstr "Отключить гибкие перерывы"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:12
+msgid "Whether you are not using a computer to work."
+msgstr "Если компьютер не используется во время работы."
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:13
+msgid "Change user presence status to busy"
+msgstr "Изменить статус присутствия на занят"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:14
+msgid "Whether to change user and IM presence to busy."
+msgstr "Следует ли изменять статус присутствия пользователя и IM на занят."
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:15
+msgid "Use notification sound"
+msgstr "Использовать звуковое уведомление"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:16
+msgid "Whether to play a sound to notify of events."
+msgstr "Следует ли проигрывать звук для уведомлений и событий."
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:17
+msgid "Notification sound file"
+msgstr "Файл звукового уведоления"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:18
+msgid "Sound file to play on pomodoro start or end."
+msgstr "Звуковой файл для проигрывания при старте или завершении помодоро"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:19
+msgid "Restore timer state"
+msgstr "Востанавливать состояние таймера"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:20
+msgid "Whether to restore state on startup."
+msgstr "Следует ли востанавливать состояние при загрузке."
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:21
+msgid "Number of completed sessions"
+msgstr "Количество завершенных сессий"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:22
+msgid "Number of completed sessions since long break"
+msgstr "Количество завершенных сессий после длительного перерыва"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:23
+msgid "Saved timer state"
+msgstr "Сохраненное состояние таймера"
+
+#: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:24
+msgid "Time of saved state"
+msgstr "Время сохраненного состояния"
--- a/po/zh_CN.po
+++ b/po/zh_CN.po
@@ -51,7 +51,7 @@
 
 #. Notification dialog toggle
 #: ../src/extension.js:141
-msgid "Fullscreen Notifications"
+msgid "Screen Notifications"
 msgstr "全屏通知"
 
 #. Notify with a sound toggle
@@ -93,7 +93,7 @@
 msgstr "暂停结束，新的番茄时间开始了～"
 
 #: ../src/timer.js:440
-msgid "It's time to take a break!"
+msgid "It's time to take a break"
 msgstr "现在是时候要休息一下了～"
 
 #: ../src/timer.js:462
@@ -110,15 +110,15 @@
 
 #: ../src/timer.js:656
 #, c-format
-msgid "You have %d second left.\n"
-msgid_plural "You have %d seconds left.\n"
-msgstr[0] "休息一会, 你有%d秒的休息时间\n"
+msgid "You have %d second left."
+msgid_plural "You have %d seconds left."
+msgstr[0] "休息一会, 你有%d秒的休息时间"
 
 #: ../src/timer.js:658
 #, c-format
-msgid "You have %d minute left.\n"
-msgid_plural "You have %d minutes left.\n"
-msgstr[0] "休息一会, 你有%d分的休息时间\n"
+msgid "You have %d minute left."
+msgid_plural "You have %d minutes left."
+msgstr[0] "休息一会, 你有%d分的休息时间"
 
 #: ../org.gnome.shell.extensions.pomodoro.gschema.xml.in.h:1
 msgid "Pomodoro duration"
--- a/src/extension.js
+++ b/src/extension.js
@@ -17,6 +17,7 @@
 const Lang = imports.lang;
 
 const Gio = imports.gi.Gio;
+const Gtk = imports.gi.Gtk;
 const Meta = imports.gi.Meta;
 const Pango = imports.gi.Pango;
 const Shell = imports.gi.Shell;
@@ -39,7 +40,7 @@
 
 // Time in seconds to fade timer label when pause starts or ends
 const FADE_ANIMATION_TIME = 0.25;
-const FADE_OPACITY = 150;
+const FADE_OPACITY = 120;
 
 // Slider helper functions
 const SLIDER_UPPER = 2700;
@@ -73,7 +74,6 @@
         this._dbus = new PomodoroDBus.PomodoroTimer(this._timer);
         
         this._settings = PomodoroUtil.getSettings();
-        this._settings.connect('changed', Lang.bind(this, this._onSettingsChanged));
         
         
         // Timer label
@@ -113,10 +113,11 @@
         
         // Initialize
         this._timer.restore();
-        
+
         this._updateLabel();
         this._updateSessionCount();
         
+        this._settingsChangedId = this._settings.connect('changed', Lang.bind(this, this._onSettingsChanged));
         this._onSettingsChanged();
     },
 
@@ -141,7 +142,7 @@
         this._optionsMenu.menu.addMenuItem(this._changePresenceStatusToggle);
         
         // Notification dialog toggle
-        this._showDialogsToggle = new PopupMenu.PopupSwitchMenuItem(_("Fullscreen Notifications"));
+        this._showDialogsToggle = new PopupMenu.PopupSwitchMenuItem(_("Screen Notifications"));
         this._showDialogsToggle.connect('toggled', Lang.bind(this, function(item) {
             this._settings.set_boolean('show-notification-dialogs', item.state);
         }));
@@ -333,7 +334,7 @@
         this._updateLabel();
         this._updateSessionCount();
         
-        if (state == PomodoroTimer.State.PAUSE)
+        if (state == PomodoroTimer.State.PAUSE || state == PomodoroTimer.State.NULL)
             Tweener.addTween(this.label,
                              { opacity: FADE_OPACITY,
                                transition: 'easeOutQuad',
@@ -352,10 +353,15 @@
     },
     
     _onDestroy: function() {
+        if (this._settingsChangedId != 0) {
+            this._settings.disconnect(this._settingsChangedId);
+            this._settingsChangedId = 0;
+        }
+
         Main.wm.removeKeybinding('toggle-pomodoro-timer');
 
-        this._timer.destroy();
         this._dbus.destroy();
+        this._timer.destroy();
     }
 });
 
@@ -364,6 +370,11 @@
 
 function init(metadata) {
     PomodoroUtil.initTranslations('gnome-shell-pomodoro');
+
+    let iconTheme = Gtk.IconTheme.get_default();
+
+    if (!iconTheme.has_icon('timer-symbolic'))
+        iconTheme.append_search_path (PomodoroUtil.getExtensionPath());
 }
 
 function enable() {
--- a/src/notification.js
+++ b/src/notification.js
@@ -22,7 +22,6 @@
 const Clutter = imports.gi.Clutter;
 const GLib = imports.gi.GLib;
 const Gio = imports.gi.Gio;
-const Gtk = imports.gi.Gtk;
 const GnomeDesktop = imports.gi.GnomeDesktop;
 const Shell = imports.gi.Shell;
 const St = imports.gi.St;
@@ -59,7 +58,7 @@
 // Time to determine activity after which notification dialog is closed
 const IDLE_TIME_TO_CLOSE = 600;
 // Time before user activity is being monitored
-const MIN_DISPLAY_TIME = 200;
+const MIN_DISPLAY_TIME = 30;
 // Time to fade-in or fade-out notification in seconds
 const OPEN_AND_CLOSE_TIME = 180;
 
@@ -73,28 +72,49 @@
 };
 
 
-const NotificationSource = new Lang.Class({
-    Name: 'PomodoroNotificationSource',
-    Extends: MessageTray.Source,
+let source = null;
 
-    _init: function() {
-        this.parent(_("Pomodoro Timer"));
 
-        this.iconName = 'timer-symbolic';
-    },
+function get_default_source() {
+    if (!source) {
+        source = new Source();
+        source.connect('destroy', function(reason) {
+            source = null;
+        });
+    }
+    return source;
+}
 
-    createIcon: function(size) {
-        let iconTheme = Gtk.IconTheme.get_default();
 
-        if (!iconTheme.has_icon(this.iconName))
-            iconTheme.append_search_path (PomodoroUtil.getExtensionPath());
+const Source = new Lang.Class({
+    Name: 'PomodoroNotificationSource',
+    Extends: MessageTray.Source,
 
-        return new St.Icon({ icon_name: this.iconName,
-                             icon_size: size });
+    _init: function() {
+        this.parent(_("Pomodoro"), 'timer-symbolic');
+ 
+        this.connect('notification-added',
+                     Lang.bind(this, this._onNotificationAdded));
+    },
+
+    _onNotificationAdded: function(source, notification) {
+        notification.connect('destroy', Lang.bind(this,
+            function() {
+                let notifications = source.notifications;
+
+                if ((notifications.length == 0) ||
+                    (notifications.length == 1 && notifications.indexOf(notification) == 0))
+                {
+                    source.destroy(MessageTray.NotificationDestroyedReason.SOURCE_CLOSED);
+                    source.emit('done-displaying-content', false);
+                }
+            }
+        ));
     },
 
-    open: function(notification) {
-        this.destroyNonResidentNotifications();
+    close: function(close_tray) {
+        this.destroy();
+        this.emit('done-displaying-content', close_tray == true);
     }
 });
 
@@ -177,7 +197,6 @@
         return this._grabHelper.grab({
             actor: this._lightbox.actor,
             modal: true,
-            grabFocus: true,
             onUngrab: Lang.bind(this, this._onUngrab)
         });
     },
@@ -285,6 +304,8 @@
                                 })
                          });
         this.emit('opening');
+
+        Main.messageTray.close();
     },
 
     close: function(timestamp) {
--- a/src/stylesheet.css
+++ b/src/stylesheet.css
@@ -38,7 +38,7 @@
     font-weight: normal;
     font-family: Droid Sans, Droid Sans Mono, DejaVu Sans, Bitstream Vera Sans, monospace, sans-serif;
     text-align: center;
-    text-shadow: rgba(0, 0, 0, 0.15) 2px 4px 14px;
+    text-shadow: 0.0px 5.0px 8.0px rgba(0, 0, 0, 0.10);
     color: white;
 }
 
@@ -46,6 +46,6 @@
     font-size: 12pt;
     font-weight: normal;
     text-align: center;
-    text-shadow: rgba(0, 0, 0, 0.50) 1px 1px 12px;
+    text-shadow: 0.0px 1.0px 2.0px rgba(0, 0, 0, 0.35);
     color: white;
 }
--- a/src/timer.js
+++ b/src/timer.js
@@ -60,7 +60,7 @@
 const SCREENSAVER_DEACTIVATE_COMMAND = 'xdg-screensaver reset';
 
 // Remind about ongoing break in given delays
-const PAUSE_REMIND_TIMES = [60];
+const PAUSE_REMIND_TIMES = [90];
 // Ratio between user idle time and time between reminders to determine if user
 // is finally away
 const PAUSE_REMINDER_ACCEPTANCE = 0.8
@@ -92,7 +92,6 @@
         this._reminderCount = 0;
         
         this._notification = null;
-        this._notificationSource = null;
         this._notificationDialog = null;
         this._playbin = null;
         this._power = null;
@@ -102,7 +101,7 @@
         this._becameActiveId = 0;
         
         this._settings = PomodoroUtil.getSettings();
-        this._settings.connect('changed', Lang.bind(this, this._onSettingsChanged));
+        this._settingsChangedId = this._settings.connect('changed', Lang.bind(this, this._onSettingsChanged));
     },
 
     _onSettingsChanged: function (settings, key) {
@@ -151,7 +150,6 @@
     },
 
     startPomodoro: function() {
-        this._closeNotifications();
         if (this._state == State.PAUSE || this._state == State.IDLE)
             this._playNotificationSound();
         
@@ -376,9 +374,7 @@
         // if (!this._settings.get_boolean('away-from-desk'))
         //     this._deactivateScreenSaver();
 
-        this._openNotificationSource();
-
-        let notification = new MessageTray.Notification(this._notificationSource,
+        let notification = new MessageTray.Notification(Notification.get_default_source(),
                                                         _("Pause finished."),
                                                         _("A new pomodoro is starting."),
                                                         null);
@@ -396,12 +392,10 @@
             this._playNotificationSound();
         }
 
-        this._openNotificationSource();
-
         if (!this._notificationDialog) {
             this._notificationDialog = new Notification.NotificationDialog();
             this._notificationDialog.setTimer('00:00');
-            this._notificationDialog.setDescription(_("It's time to take a break!"));
+            this._notificationDialog.setDescription(_("It's time to take a break"));
 
             this._notificationDialog.connect('opening', Lang.bind(this, function() {
                     this._unscheduleReminder();
@@ -422,25 +416,23 @@
         if (this._notification)
             this._notification.destroy(MessageTray.NotificationDestroyedReason.SOURCE_CLOSED);
 
-        this._notification = new MessageTray.Notification(this._notificationSource,
+        this._notification = new MessageTray.Notification(Notification.get_default_source(),
                                                           _("Take a break!"),
                                                           null);
         this._notification.setResident(true);
 
-        //button had to be disabled due a bug in gnome-shell
-        //this._notification.addButton(1, _("Start a new pomodoro"));
+        this._notification.addButton('start-pomodoro', _("Start a new pomodoro"));
 
-        // Force to show description along with title,
-        // as this is private property, API might change
-        try {
-            this._notification._titleFitsInBannerMode = true;
-        }
-        catch(e) {
-            global.log('Pomodoro: ' + e.message);
+        this._notification._titleFitsInBannerMode = true;
+
+        if (!this._notification._bodyLabel) {
+            this._notification._bodyLabel = this._notification.addBody("", null, null);
         }
 
         this._notification.connect('action-invoked', Lang.bind(this, function(object, id) {
-                if (id == 1)
+                Main.messageTray.close();
+
+                if (id == 'start-pomodoro')
                     this.startPomodoro();
             }));
         this._notification.connect('clicked', Lang.bind(this, function() {
@@ -465,15 +457,6 @@
         this.emit('notify-pomodoro-end');
     },
 
-    _openNotificationSource: function() {
-        if (!this._notificationSource) {
-            this._notificationSource = new Notification.NotificationSource();
-            this._notificationSource.connect('destroy', Lang.bind(this, function(reason) {
-                    this._notificationSource = null;
-                }));
-        }
-    },
-
     _openNotification: function(notification) {
         if (notification) {
             if (!Main.messageTray.contains(notification.source))
@@ -485,14 +468,17 @@
     },
 
     _closeNotifications: function() {
-        if (this._notificationSource) {
-            this._notificationSource.destroy(MessageTray.NotificationDestroyedReason.SOURCE_CLOSED);
-            this._notificationSource = null;
-        }
         if (this._notificationDialog) {
             this._notificationDialog.close();
             this._notificationDialog.setOpenWhenIdle(false);
         }
+        if (this._notification) {
+            let notification = this._notification;
+            if (Main.messageTray._trayState == MessageTray.State.SHOWN)
+                notification.emit('done-displaying-content', false);
+
+            notification.destroy();
+        }
         this._unscheduleReminder();
     },
 
@@ -505,9 +491,8 @@
             return;
         
         if (!this._notificationDialog || this._notificationDialog.state == Notification.State.CLOSED) {
-            this._openNotificationSource();
 
-            let notification = new MessageTray.Notification(this._notificationSource,
+            let notification = new MessageTray.Notification(Notification.get_default_source(),
                                                             _("Hey, you're missing out on a break."),
                                                             null);
             notification.setTransient(true);
@@ -624,12 +609,13 @@
             let seconds = Math.floor(remaining % 60);
             let minutes = Math.round(remaining / 60);
             let message = (remaining <= 45)
-                                    ? ngettext("You have %d second left.\n",
-                                               "You have %d seconds left.\n", seconds).format(seconds)
-                                    : ngettext("You have %d minute left.\n",
-                                               "You have %d minutes left.\n", minutes).format(minutes);
+                        ? ngettext("You have %d second left.",
+                                   "You have %d seconds left.", seconds).format(seconds)
+                        : ngettext("You have %d minute left.",
+                                   "You have %d minutes left.", minutes).format(minutes);
 
-            this._notification.update(this._notification.title, message, {});
+            this._notification._bannerLabel.set_text(message);
+            this._notification._bodyLabel.set_text(message);
         }
     },
 
@@ -701,6 +687,11 @@
         this._closeNotifications();
         this._disableEventCapture();
 
+        if (this._settingsChangedId != 0) {
+            this._settings.disconnect(this._settingsChangedId);
+            this._settingsChangedId = 0;
+        }
+
         if (this._timeoutSource != 0) {
             GLib.source_remove(this._timeoutSource);
             this._timeoutSource = 0;
